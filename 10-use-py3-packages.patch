--- Dockerfile.orig	2020-03-15 07:56:36.736057903 +0000
+++ Dockerfile	2020-03-15 08:00:49.270769675 +0000
@@ -1,4 +1,4 @@
-FROM python:3.8.1-alpine3.11
+FROM alpine:3.11
 LABEL maintainer="Adrien Ferrand <ferrand.ad@gmail.com>"
 
 # Scripts in /scripts are required to be in the PATH to run properly as certbot's hooks
@@ -6,12 +6,12 @@ ENV PATH /scripts:$PATH
 
 # Versioning
 ENV LEXICON_VERSION 3.3.17
-ENV CERTBOT_VERSION 1.3.0
+ENV CERTBOT_VERSION 1.3.0-r0
 
 # Install dependencies, certbot, lexicon, prepare for first start and clean
-RUN apk --no-cache --update add rsyslog git libffi libxml2 libxslt libstdc++ openssl docker ethtool tzdata bash bind-tools \
- && apk --no-cache --update --virtual build-dependencies add libffi-dev libxml2-dev libxslt-dev openssl-dev build-base linux-headers \
- && pip install --no-cache-dir "certbot==$CERTBOT_VERSION" \
+RUN sed -i -e 's/v[[:digit:]]\..*\//edge\//g' /etc/apk/repositories \
+ && apk --no-cache add syslog-ng git libstdc++ openssl docker ethtool tzdata bash bind-tools certbot=$CERTBOT_VERSION py3-requests py3-future py3-lxml py3-pyzmq py3-psutil \
+ && apk --no-cache --virtual build-dependencies add  build-base python3-dev py3-pip \
  && pip install --no-cache-dir "dns-lexicon[full]==$LEXICON_VERSION" \
  && pip install --no-cache-dir circus \
  && mkdir -p /var/letsencrypt \
